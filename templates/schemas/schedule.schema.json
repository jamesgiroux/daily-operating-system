{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://dailyos.dev/schemas/schedule.json",
  "title": "DailyOS Schedule",
  "description": "Daily schedule with meetings and overview. Keys use camelCase to match Rust serde(rename_all = camelCase).",
  "type": "object",
  "required": ["date", "meetings"],
  "properties": {
    "date": {
      "type": "string",
      "format": "date"
    },
    "greeting": {
      "type": "string",
      "description": "Time-appropriate greeting (Good morning, etc.)"
    },
    "summary": {
      "type": "string",
      "description": "One-line summary of the day"
    },
    "focus": {
      "type": "string",
      "description": "Suggested focus area for the day"
    },
    "meetings": {
      "type": "array",
      "items": { "$ref": "#/$defs/meeting" }
    }
  },
  "$defs": {
    "meeting": {
      "type": "object",
      "required": ["id", "time", "title", "type", "hasPrep"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier (e.g., 0900-customer-acme-sync)"
        },
        "calendarEventId": {
          "type": "string",
          "description": "Google Calendar event ID for cross-source matching"
        },
        "time": {
          "type": "string",
          "description": "Start time (e.g., 9:00 AM)"
        },
        "endTime": {
          "type": "string",
          "description": "End time (e.g., 9:45 AM)"
        },
        "title": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": ["customer", "qbr", "training", "internal", "team_sync", "one_on_one", "partnership", "all_hands", "external", "personal"]
        },
        "account": {
          "type": "string",
          "description": "Account name for customer meetings"
        },
        "isCurrent": {
          "type": "boolean",
          "default": false,
          "description": "True if this meeting is happening now"
        },
        "hasPrep": {
          "type": "boolean",
          "description": "Whether a prep file exists for this meeting"
        },
        "prepFile": {
          "type": "string",
          "description": "Path to prep JSON file (relative to data/)"
        },
        "prepSummary": {
          "$ref": "#/$defs/prepSummary"
        }
      }
    },
    "prepSummary": {
      "type": "object",
      "description": "Condensed prep for dashboard dropdown",
      "properties": {
        "atAGlance": {
          "type": "array",
          "items": { "type": "string" },
          "maxItems": 4,
          "description": "Key metrics or context points"
        },
        "discuss": {
          "type": "array",
          "items": { "type": "string" },
          "maxItems": 4,
          "description": "Talking points, actions, or questions"
        },
        "watch": {
          "type": "array",
          "items": { "type": "string" },
          "maxItems": 3,
          "description": "Risks or blockers to monitor"
        },
        "wins": {
          "type": "array",
          "items": { "type": "string" },
          "maxItems": 3,
          "description": "Recent wins to acknowledge"
        }
      }
    }
  }
}
